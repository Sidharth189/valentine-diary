html {
    overflow: hidden;
    height: 100%;
}

/* Main Reset & Body */
body {
    /* User Provided Background */
    background: url('/images/3bd3e328-e721-4414-bfc0-31551219fea5.png') no-repeat center center fixed;
    background-size: cover;

    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
    width: 100%;
    margin: 0;
    overflow: hidden;
    position: fixed;
    /* Lock to viewport */
    font-family: 'Indie Flower', cursive;
    /* Handwritten feel */
}

@keyframes gradientBG {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

/* Floating Background Elements (Roses, Hearts, Stars) */
.floating-bg-item {
    position: fixed;
    pointer-events: none;
    z-index: -1;
    animation: floatUp linear infinite;
    will-change: transform, opacity;
}

@keyframes floatUp {
    0% {
        transform: translateY(110vh) rotate(0deg);
        opacity: 0;
    }

    10% {
        opacity: 0.7;
    }

    90% {
        opacity: 0.7;
    }

    100% {
        transform: translateY(-10vh) rotate(360deg);
        opacity: 0;
    }
}

/* Preview Mode Scale */
body.body-preview .scene {
    /* Scale handled by JS */
    margin-top: -100px;
}

/* 3D Scene Container */
.scene {
    width: 420px;
    /* Increased width */
    height: 560px;
    /* Increased height */
    perspective: 1500px;
    position: relative;
    /* Floating Animation */
    animation: float 6s ease-in-out infinite;
}

/* Floating Shadow */
.scene::after {
    content: '';
    position: absolute;
    bottom: -60px;
    /* Below the book */
    left: 5%;
    width: 90%;
    height: 30px;
    border-radius: 50%;
    background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.3) 0%, transparent 70%);
    opacity: 0.6;
    transform: rotateX(90deg) translateZ(-50px);
    /* Lay flat on "floor" */
    animation: shadow 6s ease-in-out infinite;
    z-index: -1;
    /* Behind book */
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-20px);
    }
}

@keyframes shadow {

    0%,
    100% {
        transform: rotateX(90deg) translateZ(-50px) scale(1);
        opacity: 0.6;
    }

    50% {
        transform: rotateX(90deg) translateZ(-50px) scale(0.85);
        opacity: 0.3;
    }
}

/* The Book Itself */
.book {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 1s;
    transform: rotateZ(-8deg);
    /* Initial Casual Tilt */
}

.book.open {
    transform: translateX(210px) rotateZ(0deg);
    /* Straighten and center */
    /* Shift right by 50% of width (420px/2) to center spine */
}

.book.closed-back {
    /* Move spine to right edge (100% = 420px) so the left-flipped pages (-100% width) are centered */
    transform: translateX(420px) rotateZ(-8deg) !important;
    /* Pivot around the SPINE (left edge) to match normal rotation physics */
    transform-origin: 0% 50% !important;
}

/* Pages */
.page {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    transform-origin: left;
    /* Flip from the spine */
    transform-style: preserve-3d;
    transition: transform 1s cubic-bezier(0.645, 0.045, 0.355, 1);
    cursor: pointer;
}

/* Faces of the page */
/* Faces of the page */
/* Faces of the page */
/* Faces of the page */
.front {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 20px 20px 20px 40px;
    /* Left padding for spiral */
    box-sizing: border-box;
    text-align: center;
    background-color: #fffbf0;

    /* Lined Paper Effect (No Margin) */
    background-image:
        linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px);
    /* Horizontal lines only */
    background-size: 100% 25px;

    border: 1px solid #e0e0e0;
    box-shadow: inset 5px 0 15px rgba(0, 0, 0, 0.05);
}

.back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 20px 40px 20px 20px;
    /* Right padding for spiral/margin balance */
    box-sizing: border-box;
    text-align: center;
    background-color: #fffbf0;

    /* Lined Paper Effect (No Margin) */
    background-image:
        linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px);
    /* Horizontal lines only */
    background-size: 100% 25px;

    border: 1px solid #e0e0e0;
    box-shadow: inset 5px 0 15px rgba(0, 0, 0, 0.05);
    transform: rotateY(180deg);
    border-left: none;
    box-shadow: -5px 5px 15px rgba(0, 0, 0, 0.1);
}

/* Spiral Binding Effect */
.front::before {
    content: '';
    position: absolute;
    top: 5px;
    left: 0;
    bottom: 5px;
    width: 30px;
    background:
        radial-gradient(circle at 8px 50%, #333 4px, transparent 5px),
        /* Holes */
        repeating-linear-gradient(to bottom, transparent 0, transparent 20px, #aaa 20px, #333 22px, #aaa 24px, transparent 24px);
    /* Wires */
    background-size: 30px 30px;
    /* Size of one repetition */
    z-index: 10;
    border-right: 2px solid rgba(0, 0, 0, 0.1);
    /* Edge line */
}

/* Cover Styling */
/* Cover Styling */
.cover {
    /* Leather Texture - Refined */
    background-color: #6a1b21;
    /* Deep Burgundy Base */
    background-image:
        radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
        radial-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px);
    background-size: 4px 4px, 5px 5px;
    background-position: 0 0, 2px 2px;

    color: #f1c40f;
    /* Gold text for luxury look */
    border-radius: 5px 15px 15px 5px;
    border: none;
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.6);
    /* Inner shadow for depth */
}

.cover h1 {
    font-family: 'Dancing Script', cursive;
    font-size: 3em;
    margin-bottom: 10px;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    color: #e6c278;
    /* Goldish text */
}

/* Back Cover Styling */
.back-cover {
    /* Leather Texture (Same as front) */
    background-color: #6a1b21 !important;
    background-image:
        radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
        radial-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px) !important;
    background-size: 4px 4px, 5px 5px !important;
    background-position: 0 0, 2px 2px !important;

    color: white !important;
    border-radius: 5px 15px 15px 5px !important;
    border: none !important;
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.6) !important;
    /* Inner shadow for depth */
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Back cover text */
.back-cover p {
    font-family: 'Dancing Script', cursive;
    font-size: 2rem !important;
    color: #ffd700 !important;
    /* Gold */
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    margin: 0;
}



/* Page Content Styling */
.content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    width: 100%;
    height: 100%;
    overflow: hidden;
    /* Hide overflow to prevent scrollbars */
    justify-content: flex-start;
    /* Start from top */
    padding-right: 5px;
    /* Space for scrollbar */
    box-sizing: border-box;
    /* Include padding in width */

    /* Thin Scrollbar */
    scrollbar-width: thin;
    scrollbar-color: #d35400 transparent;
}

/* Webkit Scrollbar */
.content::-webkit-scrollbar {
    width: 6px;
}

.content::-webkit-scrollbar-track {
    background: transparent;
}

.content::-webkit-scrollbar-thumb {
    background-color: rgba(211, 84, 0, 0.3);
    border-radius: 10px;
}

.content p {
    font-size: 1.1em;
    /* Slightly smaller to fit more */
    color: #2c3e50;
    white-space: pre-wrap;
    /* Preserve line breaks */
    overflow-wrap: break-word;
    /* Ensure long words don't overflow */
    word-wrap: break-word;
    /* Legacy support */
    text-align: left;
    /* Better for reading stories */
    width: 100%;
    line-height: 1.6;
}

.content.final-page {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px 40px;
    /* More padding for center */
}

.content.final-page h2 {
    margin-bottom: 20px;
    width: 100%;
    /* Default font and color inherit */
}

.content.final-page p {
    text-align: center;
    font-size: 1.5em;
    /* Keep size for prominence? Or revert? safer to keep prominence */
    margin-bottom: 30px;
    width: 100%;
    /* Default color inherits */
}


.photo-placeholder {
    /* Responsive Sizing */
    width: auto;
    max-width: 90%;
    /* Occupy most of width but leave margin */
    height: auto;
    max-height: 45%;
    /* Restrict vertical height to prevent overlapping text */

    background-color: white;
    padding: 8px;
    /* White frame */

    border: 1px solid #ddd;
    box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #888;
    transform: rotate(-2deg);
    margin: 10px auto;
    /* Center and separate */
    position: relative;
}

.photo-placeholder img {
    max-width: 100%;
    max-height: 100%;
    /* Cap image height relative to container */
    object-fit: contain;
    display: block;
}

.photo-placeholder:nth-child(even) {
    transform: rotate(2deg);
}

.click-hint {
    margin-top: 20px;
    font-size: 0.9em;
    opacity: 0.8;
    animation: bounce 2s infinite;
}

@keyframes bounce {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-5px);
    }
}

/* Page Flip Class */
.flipped {
    transform: rotateY(-180deg);
}

/* Final Page Buttons */
.buttons {
    margin-top: 20px;
    display: flex;
    gap: 15px;
}

button {
    padding: 10px 20px;
    font-size: 1.2em;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-family: 'Indie Flower', cursive;
    transition: transform 0.2s, background 0.3s;
}

#yes-btn {
    background-color: #27ae60;
    color: white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

#yes-btn:hover {
    transform: scale(1.1);
    background-color: #2ecc71;
}

#no-btn {
    background-color: #c0392b;
    color: white;
    position: relative;
    /* For movement */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s;
    /* Keep transition for non-broken state */
}

/* Broken Button Animation */
.broken {
    animation: fall 1.5s forwards ease-in;
    pointer-events: none;
    /* Prevent clicking again */
    background-color: #7f8c8d !important;
    /* Look "dead" */
    box-shadow: none !important;
}

@keyframes fall {
    0% {
        transform: rotate(0deg);
    }

    20% {
        transform: rotate(20deg);
    }

    40% {
        transform: rotate(-15deg);
    }

    60% {
        transform: rotate(10deg);
        transform-origin: top left;
    }

    80% {
        transform: translateY(50px) rotate(45deg);
        opacity: 1;
    }

    100% {
        transform: translateY(400px) rotate(90deg);
        opacity: 0;
    }
}

/* Celebration Overlay */
#celebration {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.7);
    /* Darker overlay for focus */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    flex-direction: column;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s;
}

#celebration.visible {
    opacity: 1;
    pointer-events: auto;
}

/* Envelope & Animation */
/* --- Card-Only Celebration Design --- */

/* Wrapper for centering */
.envelope-wrapper {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    /* No scaling on wrapper, let card scale */
}

/* Hide Envelope Elements */
.envelope,
.envelope-back,
.envelope-front,
.envelope-top {
    display: none !important;
}

/* The Card (Now Standalone) */
.invitation-card {
    background: #fff;
    width: 800px;
    /* Wider Rectangle */
    max-width: 95vw;
    /* Responsive width */
    height: auto;
    /* Auto height to fit content */
    min-height: 300px;
    /* Minimum size for short text */

    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    z-index: 1005;

    display: flex;
    flex-direction: column;
    /* Allow content to stack */
    align-items: center;
    justify-content: center;
    padding: 20px;
    /* Outer padding */
    box-sizing: border-box;

    /* Pop-In Animation */
    transform: scale(0.5);
    opacity: 0;
    transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Visible State */
#celebration.visible .invitation-card {
    transform: scale(1);
    opacity: 1;
}

/* Decoration Border */
.invitation-card .card-border {
    border: 3px double #c0392b;
    /* Elegant Red Double Border */
    width: 100%;
    height: 100%;
    /* Fills the card */
    min-height: 260px;
    /* Ensure border looks good even if empty */

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 30px;
    /* Inner padding for text */
    box-sizing: border-box;
    text-align: center;

    /* Subtle paper texture with Custom Background */
    /* Reduced opacity to 0.65 for more visibility */
    background: linear-gradient(rgba(255, 255, 255, 0.65), rgba(255, 255, 255, 0.65)),
        url('/images/valentine-bg.webp');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

/* The Success Text */
.success-text {
    font-family: 'Pinyon Script', cursive;
    /* Requested Perfecto Calligraphy Style */
    font-weight: 400;
    font-size: 3.5rem;
    /* Larger for Pinyon Script's elegance */
    color: #c0392b;
    margin: 0;
    white-space: pre-line;
    /* Collapses spaces but keeps newlines (Fixes alignment) */
    line-height: 1.3;
    width: 100%;
    text-align: center;
    /* Ensure centering */
    display: block;
    text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.8);
    /* Stronger shadow for contrast */
}

/* Decorative Icon (Optional, can add heart) */
.success-text::after {
    content: '‚ù§';
    display: block;
    font-size: 2rem;
    margin-top: 15px;
    color: #e74c3c;
    animation: heartbeat 1.5s infinite;
}

@keyframes heartbeat {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.2);
    }
}

/* Inner Decorative Border */
.card-border {
    border: 3px double #c0392b;
    /* Thicker border */
    padding: 30px;
    /* More breathing room */
    position: relative;
}




.signature {
    font-family: 'Dancing Script', cursive;
    font-size: 1.2em;
    color: #7f8c8d;
    margin-top: 30px;
}

.hidden {
    display: none !important;
}

/* --- Fluid Responsive Design --- */

/* 
   Strategy: Scale the entire .scene container.
   Base .scene size: 420px x 560px.
   Open Book width: ~840px (plus margins).
*/

/* Tablet / Small Desktop (600px - 950px) */
@media (max-width: 950px) {
    .scene {
        /* Scale handled by JS */
        transform-origin: center center;
    }
}

/* Mobile (Portrait and Small Landscape) */
@media (max-width: 600px) {

    /* 
       On mobile, the open book (840px wide) is too wide.
       We must scale it down significantly OR change behavior.
       Scaling it down:
    */
    .scene {
        /* Scale handled by JS */
        transform-origin: center center;
        /* Reduce actual layout space taken */
        margin-top: -100px;
        margin-bottom: -100px;
    }

    .book.open {
        /* Center the OPEN book (which is 840px wide internal) */
        /* Translation is still 210px internal. */
        /* If we just scale, it stays centered. */
        transform: translateX(210px) rotateZ(0deg);
    }

    /* 
       However, purely scaling makes text tiny.
       We should scale the container but Increase font size inside?
       Or, sticking to the user request "reduce the size of diary and pages".
       They WANT it smaller to fit.
    */

    /* Card Overlay Mobile Adjustments */
    #celebration h1 {
        font-size: 1.5rem;
    }

    /* Ensure card fits comfortably */
    .invitation-card {
        width: 100%;
        /* Full width of container (minus padding) */
        max-width: 95vw;
        padding: 10px;
        /* Reduced padding */
    }

    .invitation-card .card-border {
        padding: 15px;
        /* Reduced inner padding */
    }

    .success-text {
        font-size: 1.8rem;
        /* Smaller text for mobile */
    }

    /* Mobile text and interactive elements scaling */
    .content p {
        font-size: 2.2em;
        line-height: 1.3;
    }

    .buttons button {
        font-size: 1.6em;
        padding: 12px 24px;
    }

    .click-hint {
        font-size: 1.5em;
    }

    /* Compensate for Preview Mode on Mobile */
    body.body-preview .scene {
        transform: scale(0.45);
        margin-top: -100px;
    }
}

/* Short Screens / Landscape Mobile */
@media (max-height: 600px) {
    .scene {
        /* Scale handled by JS */
        margin-top: -100px;
        margin-bottom: -100px;
    }

    .content p {
        font-size: 2em;
        /* Increase readability on small scale */
    }
}